{"ast":null,"code":"/**\r\n * @license\r\n * Copyright 2018 Google LLC\r\n *\r\n * Use of this source code is governed by an MIT-style\r\n * license that can be found in the LICENSE file or at\r\n * https://opensource.org/licenses/MIT.\r\n * =============================================================================\r\n */\nimport { dispose } from '@tensorflow/tfjs-core';\n/**\r\n * Turn any Scalar values in a Logs object into actual number values.\r\n *\r\n * @param logs The `Logs` object to be resolved in place.\r\n */\nexport async function resolveScalarsInLogs(logs) {\n  if (logs == null) {\n    return;\n  }\n  const promises = [];\n  const keys = [];\n  const scalarsToDispose = [];\n  for (const key in logs) {\n    const value = logs[key];\n    if (typeof value !== 'number') {\n      const valueScalar = value;\n      promises.push(valueScalar.data());\n      keys.push(key);\n      scalarsToDispose.push(valueScalar);\n    }\n  }\n  if (promises.length > 0) {\n    const values = await Promise.all(promises);\n    for (let i = 0; i < values.length; ++i) {\n      logs[keys[i]] = values[i][0];\n    }\n    // Dispose the original scalar tensors.\n    dispose(scalarsToDispose);\n  }\n}\n/**\r\n * Dispose all Tensors in an UnresolvedLogs object.\r\n *\r\n * @param logs An `UnresolvedLogs` object potentially containing `tf.Tensor`s in\r\n *   places where the values can be `tf.Tensor` or `number`.\r\n */\nexport function disposeTensorsInLogs(logs) {\n  if (logs == null) {\n    return;\n  }\n  for (const key in logs) {\n    const value = logs[key];\n    if (typeof value !== 'number') {\n      value.dispose();\n    }\n  }\n}","map":null,"metadata":{},"sourceType":"module"}